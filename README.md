# Тестовое задание
#### Описание задачи

Описание задачи
Необходимо написать простейший сервис, инкапсулирующий данные о DST для произвольного списка городов (см. city.sql ). Сервис должен предоставлять возможности:

- Получения локального времени в городе по переданному идентификатору города и метке времени по UTC+0.
- Обратное преобразование из локального времени и идентификатора города в метку времени по UTC+0.
- Внешний запуск процесса обновления данных (например еженедельный).

В качестве источника данных предлагается использовать https://timezonedb.com/references/get-time-zone. Исторические данные неважны, но сервис должен корректно обрабатывать все даты в диапазоне от момента своего развертывания до ближайших 3 месяцев.

## Неообходимые действия для запуска проекта

- 1. Требуется установить на сервер php7.4, mysql, composer, git
- 2. Перейти в папку где будет инициализирован проект
     Далее выполнить следующие команды
```sh
git clone https://github.com/fenix957/miraiTest.git .
composer install 
```
- 3. В файле ```config.php``` в корне проекта изменить данные для подключения к базе данных и к сервису ```timezonedb.com```
- 4. Затем выполнить следующую команду
```
php init.php
```
- 5. Теперь нужно добавить возможнеость синхронизации на ближайшие 3 месяца каждый день в 5 утра. Для этого выполните соедующую коману
 ```
crontab -e
```
-  5.1  После появления консоли  в конце добавить  заменив ПУТЬ_К_КОРНУЮ_ПРОЕКТА на путь к папке в пункте 2
```
0 5 * * * /usr/bin/php ПУТЬ_К_КОРНУЮ_ПРОЕКТА/cron.php
```
- 5.2 Сохранить изменения и выйти
- 5.3 Проведем первичную инициализацию  выпонив следующие команды, это может занять некоторое время.
```
/usr/bin/php cron.php
```
- #Напстройка и установка завершена
## Тесты
Тесты для проверки выполняется ли все по ТЗ накодятся в корне проекта в папке ```tests```

## Проверка работоспособности
Выполните следующую команду в корне проекта
```
php -S localhost:8001
```
Эта команда запустит встроенный web сервер в корне проекта
Теперь в любом браузере можете открыть ссылку  
[http://localhost:8001/](http://localhost:8001/)
Для коректной работы обязательно требуется указать и время
Также если требуется ответ только в формате json можно нажать на ссылку ```Get Json``` В конце документа после указания всех параметров
Либо в окрыть к примеру эту ссылку
[http://localhost:8001/?action=toUtc&timestamp=2022-09-17T01%3A12&city=040efa6e-3512-4523-a4dc-33e29aece663](http://localhost:8001/?action=toUtc&timestamp=2022-09-17T01%3A12&city=040efa6e-3512-4523-a4dc-33e29aece663)
